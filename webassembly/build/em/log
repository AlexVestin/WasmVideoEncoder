cd ../dependencies/x264 && \
git reset --hard && \
emconfigure ./configure \
	--prefix="$(pwd)/../../em" \
	--prefix="$(pwd)/dist" \
	--extra-cflags="-c -s USE_PTHREADS=1 -Wno-unknown-warning-option" \
	--host=x86-none-linux \
	--disable-cli \
	--enable-shared \
	--disable-opencl \
	--disable-interlaced \
	--bit-depth=8 \
	--chroma-format=420 \
	--disable-asm \
	\
	--disable-avs \
	--disable-swscale \
	--disable-lavf \
	--disable-ffms \
	--disable-gpac \
	--disable-lsmash \
	&& \
emmake make -j8 && \
emmake make install
HEAD is now at 303c484e ppc: Optimize quant functions
platform:      X86
byte order:    little-endian
system:        LINUX
cli:           no
libx264:       internal
shared:        yes
static:        no
asm:           no
interlaced:    no
avs:           no
lavf:          no
ffms:          no
mp4:           no
gpl:           yes
thread:        posix
opencl:        no
filters:       crop select_every
lto:           no
debug:         no
gprof:         no
strip:         no
PIC:           no
bit depth:     8
chroma format: 420

You can run 'make' or 'make fprofiled' now.
make[1]: Entering directory '/home/alex/prog/WasmVideoEncoder/webassembly/build/dependencies/x264'
dependency file generation...
/home/alex/emsdk/upstream/emscripten/emcc -Wshadow -O3 -ffast-math  -Wall -I. -I. -c -s USE_PTHREADS=1 -Wno-unknown-warning-option -std=gnu99 -D_GNU_SOURCE -mstack-alignment=64 -fomit-frame-pointer -fno-tree-vectorize -c common/osdep.c -o common/osdep.o
/home/alex/emsdk/upstream/emscripten/emcc -Wshadow -O3 -ffast-math  -Wall -I. -I. -c -s USE_PTHREADS=1 -Wno-unknown-warning-option -std=gnu99 -D_GNU_SOURCE -mstack-alignment=64 -fomit-frame-pointer -fno-tree-vectorize -c common/base.c -o common/base.o
/home/alex/emsdk/upstream/emscripten/emcc -Wshadow -O3 -ffast-math  -Wall -I. -I. -c -s USE_PTHREADS=1 -Wno-unknown-warning-option -std=gnu99 -D_GNU_SOURCE -mstack-alignment=64 -fomit-frame-pointer -fno-tree-vectorize -c common/cpu.c -o common/cpu.o
/home/alex/emsdk/upstream/emscripten/emcc -Wshadow -O3 -ffast-math  -Wall -I. -I. -c -s USE_PTHREADS=1 -Wno-unknown-warning-option -std=gnu99 -D_GNU_SOURCE -mstack-alignment=64 -fomit-frame-pointer -fno-tree-vectorize -c common/tables.c -o common/tables.o
/home/alex/emsdk/upstream/emscripten/emcc -Wshadow -O3 -ffast-math  -Wall -I. -I. -c -s USE_PTHREADS=1 -Wno-unknown-warning-option -std=gnu99 -D_GNU_SOURCE -mstack-alignment=64 -fomit-frame-pointer -fno-tree-vectorize -c encoder/api.c -o encoder/api.o
/home/alex/emsdk/upstream/emscripten/emcc -Wshadow -O3 -ffast-math  -Wall -I. -I. -c -s USE_PTHREADS=1 -Wno-unknown-warning-option -std=gnu99 -D_GNU_SOURCE -mstack-alignment=64 -fomit-frame-pointer -fno-tree-vectorize -c common/mc.c -o common/mc-8.o -DHIGH_BIT_DEPTH=0 -DBIT_DEPTH=8
/home/alex/emsdk/upstream/emscripten/emcc -Wshadow -O3 -ffast-math  -Wall -I. -I. -c -s USE_PTHREADS=1 -Wno-unknown-warning-option -std=gnu99 -D_GNU_SOURCE -mstack-alignment=64 -fomit-frame-pointer -fno-tree-vectorize -c common/predict.c -o common/predict-8.o -DHIGH_BIT_DEPTH=0 -DBIT_DEPTH=8
/home/alex/emsdk/upstream/emscripten/emcc -Wshadow -O3 -ffast-math  -Wall -I. -I. -c -s USE_PTHREADS=1 -Wno-unknown-warning-option -std=gnu99 -D_GNU_SOURCE -mstack-alignment=64 -fomit-frame-pointer -fno-tree-vectorize -c common/pixel.c -o common/pixel-8.o -DHIGH_BIT_DEPTH=0 -DBIT_DEPTH=8
/home/alex/emsdk/upstream/emscripten/emcc -Wshadow -O3 -ffast-math  -Wall -I. -I. -c -s USE_PTHREADS=1 -Wno-unknown-warning-option -std=gnu99 -D_GNU_SOURCE -mstack-alignment=64 -fomit-frame-pointer -fno-tree-vectorize -c common/macroblock.c -o common/macroblock-8.o -DHIGH_BIT_DEPTH=0 -DBIT_DEPTH=8
/home/alex/emsdk/upstream/emscripten/emcc -Wshadow -O3 -ffast-math  -Wall -I. -I. -c -s USE_PTHREADS=1 -Wno-unknown-warning-option -std=gnu99 -D_GNU_SOURCE -mstack-alignment=64 -fomit-frame-pointer -fno-tree-vectorize -c common/frame.c -o common/frame-8.o -DHIGH_BIT_DEPTH=0 -DBIT_DEPTH=8
/home/alex/emsdk/upstream/emscripten/emcc -Wshadow -O3 -ffast-math  -Wall -I. -I. -c -s USE_PTHREADS=1 -Wno-unknown-warning-option -std=gnu99 -D_GNU_SOURCE -mstack-alignment=64 -fomit-frame-pointer -fno-tree-vectorize -c common/dct.c -o common/dct-8.o -DHIGH_BIT_DEPTH=0 -DBIT_DEPTH=8
/home/alex/emsdk/upstream/emscripten/emcc -Wshadow -O3 -ffast-math  -Wall -I. -I. -c -s USE_PTHREADS=1 -Wno-unknown-warning-option -std=gnu99 -D_GNU_SOURCE -mstack-alignment=64 -fomit-frame-pointer -fno-tree-vectorize -c common/cabac.c -o common/cabac-8.o -DHIGH_BIT_DEPTH=0 -DBIT_DEPTH=8
/home/alex/emsdk/upstream/emscripten/emcc -Wshadow -O3 -ffast-math  -Wall -I. -I. -c -s USE_PTHREADS=1 -Wno-unknown-warning-option -std=gnu99 -D_GNU_SOURCE -mstack-alignment=64 -fomit-frame-pointer -fno-tree-vectorize -c common/common.c -o common/common-8.o -DHIGH_BIT_DEPTH=0 -DBIT_DEPTH=8
/home/alex/emsdk/upstream/emscripten/emcc -Wshadow -O3 -ffast-math  -Wall -I. -I. -c -s USE_PTHREADS=1 -Wno-unknown-warning-option -std=gnu99 -D_GNU_SOURCE -mstack-alignment=64 -fomit-frame-pointer -fno-tree-vectorize -c common/rectangle.c -o common/rectangle-8.o -DHIGH_BIT_DEPTH=0 -DBIT_DEPTH=8
/home/alex/emsdk/upstream/emscripten/emcc -Wshadow -O3 -ffast-math  -Wall -I. -I. -c -s USE_PTHREADS=1 -Wno-unknown-warning-option -std=gnu99 -D_GNU_SOURCE -mstack-alignment=64 -fomit-frame-pointer -fno-tree-vectorize -c common/set.c -o common/set-8.o -DHIGH_BIT_DEPTH=0 -DBIT_DEPTH=8
/home/alex/emsdk/upstream/emscripten/emcc -Wshadow -O3 -ffast-math  -Wall -I. -I. -c -s USE_PTHREADS=1 -Wno-unknown-warning-option -std=gnu99 -D_GNU_SOURCE -mstack-alignment=64 -fomit-frame-pointer -fno-tree-vectorize -c common/quant.c -o common/quant-8.o -DHIGH_BIT_DEPTH=0 -DBIT_DEPTH=8
/home/alex/emsdk/upstream/emscripten/emcc -Wshadow -O3 -ffast-math  -Wall -I. -I. -c -s USE_PTHREADS=1 -Wno-unknown-warning-option -std=gnu99 -D_GNU_SOURCE -mstack-alignment=64 -fomit-frame-pointer -fno-tree-vectorize -c common/deblock.c -o common/deblock-8.o -DHIGH_BIT_DEPTH=0 -DBIT_DEPTH=8
/home/alex/emsdk/upstream/emscripten/emcc -Wshadow -O3 -ffast-math  -Wall -I. -I. -c -s USE_PTHREADS=1 -Wno-unknown-warning-option -std=gnu99 -D_GNU_SOURCE -mstack-alignment=64 -fomit-frame-pointer -fno-tree-vectorize -c common/vlc.c -o common/vlc-8.o -DHIGH_BIT_DEPTH=0 -DBIT_DEPTH=8
/home/alex/emsdk/upstream/emscripten/emcc -Wshadow -O3 -ffast-math  -Wall -I. -I. -c -s USE_PTHREADS=1 -Wno-unknown-warning-option -std=gnu99 -D_GNU_SOURCE -mstack-alignment=64 -fomit-frame-pointer -fno-tree-vectorize -c common/mvpred.c -o common/mvpred-8.o -DHIGH_BIT_DEPTH=0 -DBIT_DEPTH=8
/home/alex/emsdk/upstream/emscripten/emcc -Wshadow -O3 -ffast-math  -Wall -I. -I. -c -s USE_PTHREADS=1 -Wno-unknown-warning-option -std=gnu99 -D_GNU_SOURCE -mstack-alignment=64 -fomit-frame-pointer -fno-tree-vectorize -c common/bitstream.c -o common/bitstream-8.o -DHIGH_BIT_DEPTH=0 -DBIT_DEPTH=8
/home/alex/emsdk/upstream/emscripten/emcc -Wshadow -O3 -ffast-math  -Wall -I. -I. -c -s USE_PTHREADS=1 -Wno-unknown-warning-option -std=gnu99 -D_GNU_SOURCE -mstack-alignment=64 -fomit-frame-pointer -fno-tree-vectorize -c encoder/analyse.c -o encoder/analyse-8.o -DHIGH_BIT_DEPTH=0 -DBIT_DEPTH=8
/home/alex/emsdk/upstream/emscripten/emcc -Wshadow -O3 -ffast-math  -Wall -I. -I. -c -s USE_PTHREADS=1 -Wno-unknown-warning-option -std=gnu99 -D_GNU_SOURCE -mstack-alignment=64 -fomit-frame-pointer -fno-tree-vectorize -c encoder/me.c -o encoder/me-8.o -DHIGH_BIT_DEPTH=0 -DBIT_DEPTH=8
/home/alex/emsdk/upstream/emscripten/emcc -Wshadow -O3 -ffast-math  -Wall -I. -I. -c -s USE_PTHREADS=1 -Wno-unknown-warning-option -std=gnu99 -D_GNU_SOURCE -mstack-alignment=64 -fomit-frame-pointer -fno-tree-vectorize -c encoder/ratecontrol.c -o encoder/ratecontrol-8.o -DHIGH_BIT_DEPTH=0 -DBIT_DEPTH=8
/home/alex/emsdk/upstream/emscripten/emcc -Wshadow -O3 -ffast-math  -Wall -I. -I. -c -s USE_PTHREADS=1 -Wno-unknown-warning-option -std=gnu99 -D_GNU_SOURCE -mstack-alignment=64 -fomit-frame-pointer -fno-tree-vectorize -c encoder/set.c -o encoder/set-8.o -DHIGH_BIT_DEPTH=0 -DBIT_DEPTH=8
/home/alex/emsdk/upstream/emscripten/emcc -Wshadow -O3 -ffast-math  -Wall -I. -I. -c -s USE_PTHREADS=1 -Wno-unknown-warning-option -std=gnu99 -D_GNU_SOURCE -mstack-alignment=64 -fomit-frame-pointer -fno-tree-vectorize -c encoder/macroblock.c -o encoder/macroblock-8.o -DHIGH_BIT_DEPTH=0 -DBIT_DEPTH=8
/home/alex/emsdk/upstream/emscripten/emcc -Wshadow -O3 -ffast-math  -Wall -I. -I. -c -s USE_PTHREADS=1 -Wno-unknown-warning-option -std=gnu99 -D_GNU_SOURCE -mstack-alignment=64 -fomit-frame-pointer -fno-tree-vectorize -c encoder/cabac.c -o encoder/cabac-8.o -DHIGH_BIT_DEPTH=0 -DBIT_DEPTH=8
/home/alex/emsdk/upstream/emscripten/emcc -Wshadow -O3 -ffast-math  -Wall -I. -I. -c -s USE_PTHREADS=1 -Wno-unknown-warning-option -std=gnu99 -D_GNU_SOURCE -mstack-alignment=64 -fomit-frame-pointer -fno-tree-vectorize -c encoder/cavlc.c -o encoder/cavlc-8.o -DHIGH_BIT_DEPTH=0 -DBIT_DEPTH=8
/home/alex/emsdk/upstream/emscripten/emcc -Wshadow -O3 -ffast-math  -Wall -I. -I. -c -s USE_PTHREADS=1 -Wno-unknown-warning-option -std=gnu99 -D_GNU_SOURCE -mstack-alignment=64 -fomit-frame-pointer -fno-tree-vectorize -c encoder/encoder.c -o encoder/encoder-8.o -DHIGH_BIT_DEPTH=0 -DBIT_DEPTH=8
/home/alex/emsdk/upstream/emscripten/emcc -Wshadow -O3 -ffast-math  -Wall -I. -I. -c -s USE_PTHREADS=1 -Wno-unknown-warning-option -std=gnu99 -D_GNU_SOURCE -mstack-alignment=64 -fomit-frame-pointer -fno-tree-vectorize -c encoder/lookahead.c -o encoder/lookahead-8.o -DHIGH_BIT_DEPTH=0 -DBIT_DEPTH=8
/home/alex/emsdk/upstream/emscripten/emcc -Wshadow -O3 -ffast-math  -Wall -I. -I. -c -s USE_PTHREADS=1 -Wno-unknown-warning-option -std=gnu99 -D_GNU_SOURCE -mstack-alignment=64 -fomit-frame-pointer -fno-tree-vectorize -c common/threadpool.c -o common/threadpool-8.o -DHIGH_BIT_DEPTH=0 -DBIT_DEPTH=8
/home/alex/emsdk/upstream/emscripten/emcc -o libx264.so.157 common/osdep.o common/base.o common/cpu.o common/tables.o encoder/api.o common/mc-8.o common/predict-8.o common/pixel-8.o common/macroblock-8.o common/frame-8.o common/dct-8.o common/cabac-8.o common/common-8.o common/rectangle-8.o common/set-8.o common/quant-8.o common/deblock-8.o common/vlc-8.o common/mvpred-8.o common/bitstream-8.o encoder/analyse-8.o encoder/me-8.o encoder/ratecontrol-8.o encoder/set-8.o encoder/macroblock-8.o encoder/cabac-8.o encoder/cavlc-8.o encoder/encoder-8.o encoder/lookahead-8.o common/threadpool-8.o    -shared -Wl,-soname,libx264.so.157  -lm -lpthread
make[1]: Leaving directory '/home/alex/prog/WasmVideoEncoder/webassembly/build/dependencies/x264'
make[1]: Entering directory '/home/alex/prog/WasmVideoEncoder/webassembly/build/dependencies/x264'
install -d /home/alex/prog/WasmVideoEncoder/webassembly/build/dependencies/x264/dist/include /home/alex/prog/WasmVideoEncoder/webassembly/build/dependencies/x264/dist/lib/pkgconfig
install -m 644 ./x264.h x264_config.h /home/alex/prog/WasmVideoEncoder/webassembly/build/dependencies/x264/dist/include
install -m 644 x264.pc /home/alex/prog/WasmVideoEncoder/webassembly/build/dependencies/x264/dist/lib/pkgconfig
install -d /home/alex/prog/WasmVideoEncoder/webassembly/build/dependencies/x264/dist/lib
ln -f -s libx264.so.157 /home/alex/prog/WasmVideoEncoder/webassembly/build/dependencies/x264/dist/lib/libx264.so
install -m 755 libx264.so.157 /home/alex/prog/WasmVideoEncoder/webassembly/build/dependencies/x264/dist/lib
make[1]: Leaving directory '/home/alex/prog/WasmVideoEncoder/webassembly/build/dependencies/x264'
cd ../dependencies/ffmpeg && \
git reset --hard && \
EM_PKG_CONFIG_PATH=../../em/lib/pkgconfig emconfigure ./configure \
	--prefix="$(pwd)/../../em" \
	--cc=emcc --ranlib=emranlib --enable-cross-compile --target-os=none --arch=x86 --disable-runtime-cpudetect --disable-asm --disable-fast-unaligned --disable-w32threads --disable-os2threads --disable-debug --disable-stripping --disable-safe-bitstream-reader --disable-all --enable-ffmpeg --enable-avcodec --enable-avformat --enable-avfilter --enable-swresample --enable-swscale --disable-network --disable-d3d11va --disable-dxva2 --disable-vaapi --disable-vdpau --enable-protocol=file --disable-bzlib --disable-iconv --disable-libxcb --disable-lzma --disable-sdl2 --disable-securetransport --disable-xlib --disable-zlib \
	--enable-encoder=aac \
	--enable-muxer=mp4 --enable-muxer=null \
	--enable-gpl \
	--enable-libx264 \
	--extra-cflags="-s USE_PTHREADS=1 -I../../em/include" \
	--extra-ldflags="-L../../em/lib" \
	&& \
emmake make -j8 && \
emmake make install && \
cp ../../em/bin/ffmpeg ../../../ffmpeg.bc
HEAD is now at 49efd41c47 lavf/udp: use ff_log_net_error to replace log_net_error
emcc is unable to create an executable file.
C compiler test failed.

If you think configure made a mistake, make sure you are using the latest
version from Git.  If the latest version fails, report the problem to the
ffmpeg-user@ffmpeg.org mailing list or IRC #ffmpeg on irc.freenode.net.
Include the log file "ffbuild/config.log" produced by configure as this will help
solve the problem.
